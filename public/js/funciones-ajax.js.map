{"version":3,"sources":["funciones-ajax.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"funciones-ajax.js","sourcesContent":["\r\ntinymce.init({ selector:'textarea' });\r\n\r\n$(\"#btnBuscar_pqt\").click(function(){\r\n    $.ajaxSetup({\r\n        headers: {\r\n            'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n        }\r\n    });\r\n    var codigopx=$(\"#codigopx\").val();\r\n    // alert(codigopx);\r\n    var token='drmLwc3gMXKsyrhxzMJrr4dlC8rrvtcj9Fuv9vfU';\r\n    if(codigopx.length>0){\r\n\r\n        // $.post(\"/buscarpaquete\",{codigo:codigopx}, function(data){\r\n        //     console.log(data);\r\n        //     $('#list_planes').html(data);\r\n        //\r\n        // });\r\n        var datastring=\"codigo=\"+codigopx;\r\n        $('#idLoad').html('<div class=\"preloader-wrapper small active\">'+\r\n            '<div class=\"spinner-layer spinner-green-only\">'+\r\n            '<div class=\"circle-clipper left\">'+\r\n            '<div class=\"circle\"></div>'+\r\n            '</div><div class=\"gap-patch\">'+\r\n            '<div class=\"circle\"></div>'+\r\n            '</div><div class=\"circle-clipper right\">'+\r\n            '<div class=\"circle\"></div>'+\r\n            '</div>'+\r\n            '</div>'+\r\n            '</div>');\r\n        // sleep(300);\r\n        $.post('http://gotoperu.mo/buscarpaquete', {codigo: codigopx}, function(markup) {\r\n\r\n            if(markup){\r\n\r\n                console.log(markup);\r\n                $('#list_planes').html('');\r\n                $('#list_planes').html(markup);\r\n                $('#idLoad').html('');\r\n            }\r\n            else{\r\n                $('#idLoad').html('');\r\n                $('#list_planes').html('<div id=\"card-alert\" class=\"card red lighten-5\">'+\r\n                    '<div class=\"card-content red-text\">'+\r\n                    '<p>ERROR : Ocurrio un error al cargar los datos '+markup+'</p>'+\r\n                    '</div>'+\r\n                    '<button type=\"button\" class=\"close red-text\" data-dismiss=\"alert\" aria-label=\"Close\">'+\r\n                    '<span aria-hidden=\"true\">×</span>'+\r\n                    '</button>'+\r\n                    '</div>');\r\n            }\r\n        }).fail(function (markup) {\r\n            $('#idLoad').html('');\r\n            $('#list_planes').html('<div id=\"card-alert\" class=\"card red lighten-5\">'+\r\n                '<div class=\"card-content red-text\">'+\r\n                '<p>ERROR : No se encontró el paquete con codigo: '+codigopx+'</p>'+\r\n                '</div>'+\r\n                '<button type=\"button\" class=\"close red-text\" data-dismiss=\"alert\" aria-label=\"Close\">'+\r\n                '<span aria-hidden=\"true\">×</span>'+\r\n                '</button>'+\r\n                '</div>');\r\n        });\r\n\r\n        // $.ajax({\r\n        //     dataType:'json',\r\n        //     type:'post',\r\n        //     url:\"http://gotoperu.mo/buscarpaquete\",\r\n        //     headers:{'X-CSRF-TOKEN': $('[id=\"_token\"]').val()},\r\n        //     data:{codigo:codigopx},\r\n        //     success: function(data){\r\n        //         alert(data);\r\n        //         console.log(data);\r\n        //             $('#list_planes').html(data);\r\n        // //         // $(\"#codigopx\").empty().html(data);\r\n        //     }\r\n        //     // ,\r\n        //     // error: function(data){\r\n        //     //     $(\"#mensaje\").html(\r\n        //     //         '<div id=\"card-alert\" class=\"card red lighten-5\">'+\r\n        //     //             '<div class=\"card-content red-text\">'+\r\n        //     //                 '<p>ERROR : '+data.responseJSON.name+'</p>'+\r\n        //     //             '</div>'+\r\n        //     //         '</div>');\r\n        //     // }\r\n        // });\r\n    }\r\n    else{\r\n\r\n        $(\"#codigopx\").focus();\r\n    }\r\n});\r\n\r\nvar idCotizacion=0;\r\nvar NroClic=0;\r\n$('#agregar_pqt').click( function(){\r\n     console.log(idCotizacion);\r\n    if($('#email_3').val()==\"\"){\r\n        $('#email_3').focus();\r\n        swal(\r\n            'Oops...',\r\n            'Ingrese el email del cliente!',\r\n            'warning'\r\n        )\r\n    }\r\n        if(idCotizacion==0){\r\n\r\n                // alert('con datos');\r\n            var pemail=$('#email_3').val();\r\n            var pnropasajeros=$('#nropasajeros').val();\r\n            var pfecha=$('#fecha').val();\r\n            // alert(pemail+'-'+pnropasajeros+'-'+pfecha);\r\n            $.ajaxSetup({\r\n                headers: {\r\n                    'X-CSRF-TOKEN': $('[name=\"_token\"]').val()\r\n                }\r\n            });\r\n            $.post('http://gotoperu.mo/guardar_pre_cotizacion', {email: pemail,nropasajeros:pnropasajeros,fecha:pfecha}, function(markup) {\r\n                if(markup!='0'){\r\n                     console.log(markup);\r\n                    // alert(markup);\r\n                     idCotizacion=markup;\r\n                    NroClic=1;\r\n                }\r\n                else{\r\n                      console.log('error de registro cerrarmos :'+markup);\r\n                    idCotizacion=markup;\r\n                    swal(\r\n                        'Oops...',\r\n                        'No se encontró al cliente '+pemail+'!',\r\n                        'warning'\r\n                    );\r\n                    $( \"#cerrar_modal\" ).trigger( \"click\" );\r\n                }\r\n            }).fail(function (markup) {\r\n                  console.log('Fail cerrarmos :'+markup);\r\n                idCotizacion=0;\r\n                swal(\r\n                    'Oops...',\r\n                    'currio una error vuelva a intentarlo por favor (cliente:'+pemail+', '+markup+')',\r\n                    'warning'\r\n                );\r\n                $( \"#cerrar_modal\" ).trigger( \"click\" );\r\n            });\r\n            // alert('estamos guardamos la cotizacion');\r\n            // idCotizacion=1;\r\n            // console.log(idCotizacion);\r\n\r\n\r\n        }\r\n        // else {\r\n        //     if (NroClic == 1) {\r\n        //         console.log('valor de idCotizacion:' + idCotizacion);\r\n        //         $(\"#agregar_pqt\").trigger(\"click\");\r\n        //     }\r\n        // }\r\n\r\n    }\r\n);"],"sourceRoot":"/source/"}